<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IFI Team Optimization - Complete</title>
    
    <!-- Marked.js for markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- Highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/yaml.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }
        
        #sidebar {
            width: 320px;
            background: #f8f9fa;
            border-right: 1px solid #ddd;
            overflow-y: auto;
            position: relative;
            flex-shrink: 0;
        }
        
        #sidebar-header {
            padding: 50px 20px 20px 20px;
            background: #2c1a5d;
            color: white;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        #sidebar-header h2 {
            font-size: 16px;
            font-weight: 600;
            margin: 0;
        }
        
        #toggle-sidebar {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 4px;
            padding: 6px 12px;
            cursor: pointer;
            font-size: 12px;
            color: white;
            transition: all 0.2s;
        }
        
        #toggle-sidebar:hover {
            background: rgba(255,255,255,0.3);
        }
        
        #toc {
            list-style: none;
            padding: 20px;
        }
        
        #toc li {
            margin: 0;
        }
        
        #toc a {
            color: #333;
            text-decoration: none;
            display: block;
            padding: 8px 12px;
            border-radius: 4px;
            transition: all 0.2s;
            font-size: 13px;
        }
        
        #toc a:hover {
            background: #e9ecef;
            transform: translateX(3px);
        }
        
        #toc a.active {
            background: rgba(44, 26, 93, 0.1);
            color: #2c1a5d;
            font-weight: 600;
            border-left: 3px solid #fdb825;
        }
        
        #toc .h1 {
            font-weight: 600;
            font-size: 14px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #dee2e6;
        }
        
        #toc .h1:first-child {
            margin-top: 0;
            padding-top: 0;
            border-top: none;
        }
        
        #toc .h2 {
            margin-left: 15px;
            font-size: 13px;
        }
        
        #toc .h3 {
            margin-left: 30px;
            font-size: 12px;
            color: #666;
        }
        
        #content {
            flex: 1;
            overflow-y: auto;
            padding: 40px 80px;
            scroll-behavior: smooth;
        }
        
        #markdown-content {
            max-width: 900px;
        }
        
        #markdown-content h1 {
            color: #2c1a5d;
            border-bottom: 3px solid #fdb825;
            padding-bottom: 12px;
            margin: 40px 0 20px 0;
            font-size: 2em;
        }
        
        #markdown-content h2 {
            color: #2c1a5d;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
            margin: 32px 0 16px 0;
            font-size: 1.6em;
        }
        
        #markdown-content h3 {
            color: #2c1a5d;
            margin: 24px 0 12px 0;
            font-size: 1.3em;
        }
        
        #markdown-content h4 {
            color: #555;
            margin: 20px 0 10px 0;
            font-size: 1.1em;
            font-weight: 600;
        }
        
        #markdown-content code {
            background: #f8f9fa;
            padding: 3px 6px;
            border-radius: 3px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.9em;
            color: #e83e8c;
        }
        
        #markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-left: 4px solid #fdb825;
            border-radius: 6px;
            padding: 20px;
            overflow-x: auto;
            margin: 20px 0;
        }
        
        #markdown-content pre code {
            background: none;
            padding: 0;
            color: inherit;
        }
        
        #markdown-content ul, #markdown-content ol {
            margin: 16px 0 16px 30px;
        }
        
        #markdown-content li {
            margin: 8px 0;
        }
        
        #markdown-content p {
            margin: 16px 0;
        }
        
        #markdown-content strong {
            color: #2c1a5d;
            font-weight: 600;
        }
        
        #markdown-content blockquote {
            border-left: 4px solid #fdb825;
            padding-left: 20px;
            margin: 20px 0;
            color: #666;
            font-style: italic;
        }
        
        #markdown-content hr {
            border: none;
            border-top: 2px solid #e9ecef;
            margin: 40px 0;
        }
        
        #back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #2c1a5d;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            font-size: 24px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 999;
        }
        
        #back-to-top.visible {
            opacity: 0.8;
        }
        
        #back-to-top:hover {
            opacity: 1;
            transform: translateY(-4px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.2);
        }
        
        #logo {
            position: fixed;
            bottom: 100px;
            right: 40px;
            opacity: 0.6;
            z-index: 998;
            transition: opacity 0.3s;
        }
        
        #logo:hover {
            opacity: 0.9;
        }
        
        #logo img {
            width: 55px;
            height: auto;
        }
        
        body.sidebar-hidden #sidebar {
            margin-left: -320px;
        }
        
        body.sidebar-hidden #content {
            margin-left: 0;
        }
    </style>
</head>
<body>
    <div id="sidebar">
        <div id="sidebar-header">
            <button id="toggle-sidebar">Hide</button>
            <h2>Table of Contents</h2>
        </div>
        <ul id="toc"></ul>
    </div>
    
    <div id="content">
        <div id="markdown-content"></div>
    </div>
    
    <div id="back-to-top">↑</div>
    
    <div id="logo">
        <img src="data:image/png;base64,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" alt="Centric Consulting">
    </div>
    
    <script>
        // Embedded markdown content
        const markdownContent = "# IFI Team Optimization - COMPLETE ✅\n\n**Team**: 6 agents (Douglas, Rex, Mason, Vera, Aria, Rita)\n**Location**: `//project/agent_c_config/agents/`\n**Status**: Optimized + Hard Stops Implemented\n\n---\n\n## Executive Summary\n\nOptimized IFI insurance analysis team to address accuracy and efficiency issues. Achieved 46-54% token reduction while ADDING critical accuracy enforcement.\n\n**Three-Phase Approach**:\n1. **Structural Fixes**: Quality-first hierarchy, removed bloat, condensed repetition\n2. **Practical Guidance**: 6 verification protocols, IFI-specific patterns, data source tracing\n3. **Hard Stops**: Blocking conditions that prevent assumptions from being documented as facts\n\n**Key Achievement**: Fixed structural issues AND added enforcement mechanisms that BLOCK progress when quality standards violated.\n\n---\n\n## Team Optimization Results\n\n| Agent | Role | Reduction | Key Enhancements |\n|-------|------|-----------|------------------|\n| **Douglas** | Orchestrator | 40-45% | Recovery protocols + source location + 🛑 blocking quality gate |\n| **Rex** | Pattern Miner | 60-65% | LOB protocol + 🛑 LOB isolation mandate (no cross-LOB assumptions) |\n| **Mason** | Requirements | 46-54% | Classification guidance + IFI popup pattern + 🛑 count mismatch blocker |\n| **Vera** | Quality Validator | 60-65% | Quality hierarchy fixed + 🛑 pattern assumption prohibition |\n| **Aria** | Architecture | 60-65% | Architecture expertise preserved + 🛑 pattern assumption prohibition |\n| **Rita** | Insurance Specialist | 60-65% | Insurance expertise preserved + 🛑 pattern assumption prohibition + Juncture 4 (HIGHEST RISK) |\n\n**Team-Wide**: 46-54% average reduction, 25K-35K tokens saved\n\n---\n\n## Three-Phase Implementation\n\n### Phase 1: Standard Component References\n- Replaced 20K-30K repetitive content with component references\n- 9 components per specialist, 11 for orchestrator\n- Result: Single source of truth, massive token savings\n\n### Phase 2: Structural Fixes\n- Removed: Token efficiency sections, Phase 0 systematic analysis\n- Condensed: IFI-specific sections 75-85%\n- Reordered: Quality FIRST (position 200 vs 6,000+)\n- Limited: 3 CRITICAL sections max (was 8-10)\n- Result: Quality-first hierarchy, clear priorities\n\n### Phase 3: Workflow Resilience\n- Added: 5 recovery protocols (Douglas)\n- Added: 5 critical juncture checklists\n- Added: LOB work protocol (all agents)\n- Result: Workflow continues despite failures\n\n---\n\n## Critical Additions\n\n### 1. Classification & Verification Guidance (Mason)\n6 practical protocols addressing accuracy pain points:\n1. Kill vs Eligibility Questions - explicit verification process\n2. Popup UI Composition - checklist + 2-part loading pattern\n3. Conditional vs Hardcoded Text - code-based distinction\n4. Dropdown Filtering - data source verification\n5. Integration Claims - method call verification\n6. Uncertainty Documentation - UNVERIFIED marking + escalation\n\n### 2. Data Source Tracing Emphasis (Mason)\n- MUST trace to data source (database/config/code)\n- MUST extract ACTUAL question content (not just framework)\n- MUST verify count if expected count known\n- MUST escalate if count mismatch\n\n### 3. Hard Stops - Assumption Prevention (ALL AGENTS)\n**Problem**: Despite evidence standards, agents made assumptions (\"WCP=6, CGL=6, therefore BOP=6\")\n**Solution**: Added BLOCKING CONDITIONS that prevent progress when standards violated\n\n**Douglas**: 🛑 Blocking quality gate - MUST verify deliverables, REJECT if missing evidence or cross-LOB assumptions\n**Rex**: 🛑 LOB isolation mandate - CANNOT assume LOB patterns match, MUST verify independently\n**Mason**: 🛑 Count mismatch blocker - STOP if expected count ≠ found count, ESCALATE immediately\n**Vera**: 🛑 Pattern assumption prohibition - REJECT deliverables with unverified patterns\n**Aria**: 🛑 Pattern assumption prohibition - STOP before documenting assumed architectural patterns\n\n**Token Cost**: ~750 tokens total across 5 agents\n**Impact**: Agents CANNOT proceed when quality standards violated (forced compliance)\n\n### 4. Lessons Learned Workflow Integration (Rex, Mason, Douglas)\n\n**Problem**: Agents wasted time rediscovering patterns when hints already documented\n**Solution**: Added proactive workflow integration (reading + writing protocols)\n\n**Reading Protocol** (Step 0 in methodology):\n- Check lessons learned BEFORE starting analysis\n- Use as discovery HINTS (what patterns to look for)\n- ALWAYS verify independently (lessons ≠ answers)\n- Generic approach (works for all pattern types: popups, validations, UI, etc.)\n\n**Writing Protocol** (Douglas documentation standard):\n- Format template: Pattern name, observed in, pattern type, verification approach, limitation\n- Guidelines: NO specific values as universal truths, qualify by context, state verification requirement\n- Token limit: 200-300 tokens max per lesson (prevents bloat)\n- Bias prevention: Context qualification + limitation statements\n\n**Impact**: \n- **Efficiency**: Agents check lessons first, save rediscovery time\n- **Accuracy**: \"ALWAYS verify independently\" requirement maintained\n- **Quality**: Lessons written as general hints (not specific answers or bible)\n- **Token cost**: ~510 tokens across 3 agents (minimal for efficiency gain)\n\n---\n\n## Token Metrics\n\n| Agent | Original | Optimized | Net Reduction |\n|-------|----------|-----------|---------------|\n| Rex | ~12-14K | ~5.0-5.4K | 60-65% |\n| Vera | ~12-14K | ~6.0-7.0K | 60-65% |\n| Douglas | ~12-14K | ~7.4-8.4K | 40-45% |\n| Mason | ~12-14K | ~7.3-8.3K | 46-54% |\n| Aria | ~12-14K | ~6.0-7.0K | 60-65% |\n| Rita | ~12-14K | ~6.0-7.0K | 60-65% |\n| **TOTAL** | **~72-84K** | **~37-45K** | **46-54%** |\n\n**Team Savings**: 25K-35K tokens despite ADDING accuracy enforcement\n\n---\n\n## Pain Points Addressed\n\n| Issue | Root Cause | Solution |\n|-------|-----------|----------|\n| **Inaccurate requirements** | Quality standards buried 6,000+ tokens deep | Evidence standards at position 200, quality-first hierarchy |\n| **Kill vs eligibility confusion** | No verification process | Protocol 1: Code-tracing methodology with examples |\n| **Popup UI assumptions** | Framework found but content not extracted | Protocol 2: Data source tracing + IFI 2-part pattern |\n| **Cross-LOB pattern assumptions** | \"WCP=6, CGL=6, so BOP=6\" | 🛑 LOB isolation mandate - CANNOT assume patterns |\n| **Missing 6th question** | Found 5, expected 6, didn't escalate | 🛑 Count mismatch blocker - STOP and ESCALATE |\n| **General assumptions** | No blocking enforcement | 🛑 Hard stops prevent progress when standards violated |\n\n---\n\n## Why This Will Work\n\n### Structural Changes (Quality-First)\n- Evidence standards at position 200 (was 6,000+)\n- Quality shapes behavior from first token\n- Clear priorities (3 CRITICAL max vs 8-10)\n- Component-based (single source of truth)\n\n### Practical Guidance (Verification Protocols)\n- Kill vs Eligibility: Code-tracing methodology\n- Popup UI: Data source tracing + IFI 2-part pattern\n- Conditional Logic: Source-based distinction\n- Data Source Tracing: Extract actual content, not just framework\n- Count Verification: Match expected count or escalate\n\n### Enforcement (Hard Stops - NEW)\n**The Critical Addition**: Agents now CANNOT proceed when standards violated\n\n**Before Hard Stops**: Agents could choose efficiency over quality when inconvenient\n- See pattern → Assume it applies → Document assumption as fact ❌\n\n**After Hard Stops**: Agents BLOCKED until standards met\n- See pattern → 🛑 STOP → Verify independently OR mark UNVERIFIED ✅\n- Expected 6, found 5 → 🛑 STOP → ESCALATE immediately ✅\n- Missing evidence → 🛑 REJECT deliverable → Require verification ✅\n\n**Why This Works**: Forced compliance through blocking conditions, not just advisory guidance\n\n---\n\n## Expected Results\n\n### Accuracy\n- Evidence-based: Quality standards shape behavior from start\n- Classification: Explicit verification prevents confusion\n- Assumptions: Hard stops BLOCK progress until verified\n- Pattern recognition: Cannot assume LOB patterns match\n- Count verification: Must match expected or escalate\n\n### Efficiency\n- 20K-30K token savings = more context for work\n- Quality-first hierarchy = faster comprehension\n- Recovery protocols = continue despite failures\n- Component updates = change once, apply team-wide\n\n### Collaboration\n- Clear junctures with explicit checklists\n- Direct mesh with communication protocols\n- Recovery procedures for 5 failure scenarios\n- Blocking quality gates prevent bad handoffs\n\n---\n\n## Key Testing Scenarios\n\n1. **Cross-LOB Pattern Test**: Analyze WCP, CGL, BOP kill questions\n   - Should verify EACH LOB independently\n   - Should NOT assume BOP matches WCP/CGL\n   - Should STOP and escalate if pattern observed but not verified\n\n2. **Count Mismatch Test**: Expected 6 questions, find 5\n   - Should STOP immediately\n   - Should ESCALATE with \"Expected 6, found 5 - BLOCKING\"\n   - Should NOT document 5 as complete\n\n3. **Data Source Tracing Test**: Popup UI composition\n   - Should find GetKillQuestions method\n   - Should trace to data source (database/config)\n   - Should extract ACTUAL questions (not just \"framework found\")\n   - Should document 2-part loading (Diamond + markup)\n\n4. **Quality Gate Test**: Douglas receiving deliverable\n   - Should verify all claims have source references\n   - Should verify counts are exact (not \"estimated\")\n   - Should REJECT if cross-LOB assumptions\n   - Should REJECT if missing evidence\n\n---\n\n## Summary\n\n**What Changed**:\n- Removed 20K-30K repetitive tokens\n- Moved quality standards to position 200 (was 6,000+)\n- Added 6 verification protocols with practical examples\n- Added IFI-specific patterns (2-part popup loading)\n- Added data source tracing emphasis\n- Added HARD STOPS that block progress when standards violated\n\n**Why It Will Work**:\n- Structural: Quality shapes behavior from first token\n- Practical: Concrete examples prevent specific errors\n- Enforcement: Blocking conditions force compliance\n\n**Confidence Level**: HIGH with hard stops, VERY HIGH for preventing specific pain points\n\n**Status**: ✅ COMPLETE - Ready for Testing\n\n---\n\n**Performed By**: Bobb the Agent Builder\n**Team Location**: `//project/agent_c_config/agents/`\n";
        
        // Wait for marked.js to load
        function initPage() {
            if (typeof marked === 'undefined') {
                setTimeout(initPage, 100);
                return;
            }
            
            // Configure marked
            marked.setOptions({
                breaks: true,
                gfm: true
            });
            
            // Render markdown
            const html = marked.parse(markdownContent);
            document.getElementById('markdown-content').innerHTML = html;
            
            // Apply syntax highlighting
            if (typeof hljs !== 'undefined') {
                document.querySelectorAll('pre code').forEach((block) => {
                    hljs.highlightElement(block);
                });
            }
            
            // Build TOC
            buildTOC();
            
            // Setup scroll handlers
            setupScrollHandlers();
        }
        
        function buildTOC() {
            const content = document.getElementById('markdown-content');
            const toc = document.getElementById('toc');
            const headings = content.querySelectorAll('h1, h2, h3');
            
            headings.forEach((heading, index) => {
                // Create ID if needed
                if (!heading.id) {
                    heading.id = heading.textContent.trim().toLowerCase()
                        .replace(/[^a-z0-9]+/g, '-')
                        .replace(/(^-|-$)/g, '') + '-' + index;
                }
                
                const li = document.createElement('li');
                const a = document.createElement('a');
                a.href = '#' + heading.id;
                a.textContent = heading.textContent;
                a.className = heading.tagName.toLowerCase();
                
                a.addEventListener('click', (e) => {
                    e.preventDefault();
                    heading.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    
                    // Highlight briefly
                    const orig = heading.style.backgroundColor;
                    heading.style.backgroundColor = 'rgba(253,184,37,0.2)';
                    setTimeout(() => heading.style.backgroundColor = orig, 1500);
                    
                    // Update active
                    updateActiveTOC(a);
                });
                
                li.appendChild(a);
                toc.appendChild(li);
            });
        }
        
        function updateActiveTOC(activeLink) {
            document.querySelectorAll('#toc a').forEach(link => {
                link.classList.remove('active');
            });
            if (activeLink) {
                activeLink.classList.add('active');
            }
        }
        
        function setupScrollHandlers() {
            const contentDiv = document.getElementById('content');
            const backToTop = document.getElementById('back-to-top');
            const headings = document.querySelectorAll('#markdown-content h1, #markdown-content h2, #markdown-content h3');
            
            // Back to top button
            contentDiv.addEventListener('scroll', () => {
                if (contentDiv.scrollTop > 300) {
                    backToTop.classList.add('visible');
                } else {
                    backToTop.classList.remove('visible');
                }
                
                // Update active TOC link
                let currentHeading = null;
                headings.forEach(h => {
                    const rect = h.getBoundingClientRect();
                    if (rect.top >= 0 && rect.top < window.innerHeight / 3) {
                        currentHeading = h;
                    }
                });
                
                if (currentHeading) {
                    const activeLink = document.querySelector(`#toc a[href="#${currentHeading.id}"]`);
                    updateActiveTOC(activeLink);
                }
            });
            
            backToTop.addEventListener('click', () => {
                contentDiv.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }
        
        // Toggle sidebar
        document.getElementById('toggle-sidebar').addEventListener('click', () => {
            document.body.classList.toggle('sidebar-hidden');
            const btn = document.getElementById('toggle-sidebar');
            btn.textContent = document.body.classList.contains('sidebar-hidden') ? 'Show' : 'Hide';
        });
        
        // Initialize
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initPage);
        } else {
            initPage();
        }
    </script>
</body>
</html>